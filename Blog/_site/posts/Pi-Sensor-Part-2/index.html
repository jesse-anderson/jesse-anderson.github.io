<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jesse Anderson">
<meta name="dcterms.date" content="2024-05-18">

<title>Jesse Anderson’s Blog - Raspberry Pi Sensor Server Project Part 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5CSPYCMY55"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5CSPYCMY55', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Jesse Anderson’s Blog - Raspberry Pi Sensor Server Project Part 2">
<meta property="og:description" content="">
<meta property="og:image" content="DynamicPlot.png">
<meta property="og:site_name" content="Jesse Anderson's Blog">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Jesse Anderson’s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../archive.html"> 
<span class="menu-text">Archive</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://jesse-anderson.github.io"> <i class="bi bi-Folder symlink fill" role="img">
</i> 
<span class="menu-text">Portfolio</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jesse-anderson/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/jesse-anderson-a7c5/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Raspberry Pi Sensor Server Project Part 2</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Raspberry Pi</div>
                <div class="quarto-category">IoT</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jesse Anderson </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 18, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>After finally getting everything to work on the <a href="https://jesse-anderson.github.io/Blog/_site/posts/Pi-Sensor-Proj-May-2024/">database side of things</a> I wanted to explore dashboarding and being able to quickly pull up a visual showing what the current values are for the sensor data. After spending a few hours with Grafana and discovering that it doesn’t play nicely enough with JSON for my tastes(but pretty nicely with SQL type DBs…) I decided to just code up a pretty simple dashboard which shows the last four or so odd hours of sensor data. Its fairly simple using Chart.js and pulling the JSON data from ThingSpeak(last 6,000 entries @ 2s avg sampling = 200 min = 3 hours 20 min). I’m currently “pressure testing” the raspberry pi 4 I have and trying to ensure I have at least a week of uptime before I move to an ESP32 based solution which should let me get the rate of sampling up. The visual is below and I’ll explain the code afterwards:</p>
<div>



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Plot</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>


    <h2 class="anchored">Pi Environment Test Data</h2>
    <p><button onclick="loadChart()">Load Chart</button></p>
    <p></p>
    <p><button onclick="refreshData()">Refresh</button></p>
    <canvas id="myChart" width="400" height="200"></canvas>
    <div id="latestValues"></div>
    <script>
        async function fetchData() {
            const response = await fetch('https://api.thingspeak.com/channels/2545447/feeds.json?results=6000');
            const data = await response.json();
            return data.feeds;
        }

        function processData(feeds) {
            const labels = feeds.map(feed => new Date(feed.created_at));
            const tempC = feeds.map(feed => parseFloat(feed.field1));
            const tempF = feeds.map(feed => parseFloat(feed.field2));
            const humidity = feeds.map(feed => parseFloat(feed.field3));
            return { labels, tempC, tempF, humidity };
        }

        function displayLatestValues(labels, tempC, tempF, humidity) {
            const latestTime = labels[labels.length - 1];
            const latestTempC = tempC[tempC.length - 1];
            const latestTempF = tempF[tempF.length - 1];
            const latestHumidity = humidity[humidity.length - 1];

            const tableHTML = `
                
<table data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Time</td>
<td data-quarto-table-cell-role="th">Temp C</td>
<td data-quarto-table-cell-role="th">Temp F</td>
<td data-quarto-table-cell-role="th">Humidity</td>
</tr>
<tr class="even">
<td>${latestTime.toLocaleDateString('en-US')} ${latestTime.toLocaleTimeString('en-US')}</td>
<td>${latestTempC.toFixed(2)}</td>
<td>${latestTempF.toFixed(2)}</td>
<td>${latestHumidity.toFixed(2)}</td>
</tr>
</tbody>
</table>

            `;

            document.getElementById('latestValues').innerHTML = tableHTML;
        }

        async function createChart() {
            const feeds = await fetchData();
            const { labels, tempC, tempF, humidity } = processData(feeds);

            const ctx = document.getElementById('myChart').getContext('2d');
            const myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Temperature C',
                            data: tempC,
                            borderColor: 'rgba(255, 99, 132, 1)',
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            borderWidth: 1,
                            fill: true
                        },
                        {
                            label: 'Temperature F',
                            data: tempF,
                            borderColor: 'rgba(255, 165, 0, 1)',
                            backgroundColor: 'rgba(255, 165, 0, 0.2)',
                            borderWidth: 1,
                            fill: true
                        },
                        {
                            label: 'Humidity',
                            data: humidity,
                            borderColor: 'rgba(54, 162, 235, 1)',
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderWidth: 1,
                            fill: true
                        }
                    ]
                },
                options: {
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'hour'
                            }
                        },
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            displayLatestValues(labels, tempC, tempF, humidity);

            return myChart;
        }

        let chartInstance;

        async function refreshData() {
            if (chartInstance) {
                chartInstance.destroy();
            }
            chartInstance = await createChart();
        }

        async function loadChart() {
            if (!chartInstance) {
                chartInstance = await createChart();
            }
        }

        window.onload = async () => {
            chartInstance = await createChart();
        };
    </script>


</div>
<details>
<summary>
Code
</summary>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">"en"</span><span class="dt">&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="dt">&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> name</span><span class="op">=</span><span class="st">"viewport"</span><span class="ot"> content</span><span class="op">=</span><span class="st">"width=device-width, initial-scale=1.0"</span><span class="dt">&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Dynamic Plot<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://cdn.jsdelivr.net/npm/chart.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>    <span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>        table {</span>
<span id="cb1-11"><a href="#cb1-11"></a>            <span class="kw">width</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>            <span class="kw">border-collapse</span><span class="ch">:</span> <span class="dv">collapse</span><span class="op">;</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>            <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>        }</span>
<span id="cb1-15"><a href="#cb1-15"></a>        th<span class="op">,</span> td {</span>
<span id="cb1-16"><a href="#cb1-16"></a>            <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#ddd</span><span class="op">;</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>            <span class="kw">padding</span><span class="ch">:</span> <span class="dv">8</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>            <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">center</span><span class="op">;</span></span>
<span id="cb1-19"><a href="#cb1-19"></a>        }</span>
<span id="cb1-20"><a href="#cb1-20"></a>        th {</span>
<span id="cb1-21"><a href="#cb1-21"></a>            <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">#f2f2f2</span><span class="op">;</span></span>
<span id="cb1-22"><a href="#cb1-22"></a>        }</span>
<span id="cb1-23"><a href="#cb1-23"></a>    <span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb1-24"><a href="#cb1-24"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb1-25"><a href="#cb1-25"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb1-26"><a href="#cb1-26"></a>    <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Pi Environment Test Data<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb1-27"><a href="#cb1-27"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">"loadChart()"</span><span class="dt">&gt;</span>Load Chart<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb1-28"><a href="#cb1-28"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">"refreshData()"</span><span class="dt">&gt;</span>Refresh<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb1-29"><a href="#cb1-29"></a>    <span class="dt">&lt;</span><span class="kw">canvas</span><span class="ot"> id</span><span class="op">=</span><span class="st">"myChart"</span><span class="ot"> width</span><span class="op">=</span><span class="st">"400"</span><span class="ot"> height</span><span class="op">=</span><span class="st">"200"</span><span class="dt">&gt;&lt;/</span><span class="kw">canvas</span><span class="dt">&gt;</span></span>
<span id="cb1-30"><a href="#cb1-30"></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"latestValues"</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb1-31"><a href="#cb1-31"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-32"><a href="#cb1-32"></a>        <span class="kw">async</span> <span class="kw">function</span> <span class="fu">fetchData</span>() {</span>
<span id="cb1-33"><a href="#cb1-33"></a>            <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="st">'https://api.thingspeak.com/channels/2545447/feeds.json?results=6000'</span>)<span class="op">;</span></span>
<span id="cb1-34"><a href="#cb1-34"></a>            <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb1-35"><a href="#cb1-35"></a>            <span class="cf">return</span> data<span class="op">.</span><span class="at">feeds</span><span class="op">;</span></span>
<span id="cb1-36"><a href="#cb1-36"></a>        }</span>
<span id="cb1-37"><a href="#cb1-37"></a></span>
<span id="cb1-38"><a href="#cb1-38"></a>        <span class="kw">function</span> <span class="fu">processData</span>(feeds) {</span>
<span id="cb1-39"><a href="#cb1-39"></a>            <span class="kw">const</span> labels <span class="op">=</span> feeds<span class="op">.</span><span class="fu">map</span>(feed <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Date</span>(feed<span class="op">.</span><span class="at">created_at</span>))<span class="op">;</span></span>
<span id="cb1-40"><a href="#cb1-40"></a>            <span class="kw">const</span> tempC <span class="op">=</span> feeds<span class="op">.</span><span class="fu">map</span>(feed <span class="kw">=&gt;</span> <span class="pp">parseFloat</span>(feed<span class="op">.</span><span class="at">field1</span>))<span class="op">;</span></span>
<span id="cb1-41"><a href="#cb1-41"></a>            <span class="kw">const</span> tempF <span class="op">=</span> feeds<span class="op">.</span><span class="fu">map</span>(feed <span class="kw">=&gt;</span> <span class="pp">parseFloat</span>(feed<span class="op">.</span><span class="at">field2</span>))<span class="op">;</span></span>
<span id="cb1-42"><a href="#cb1-42"></a>            <span class="kw">const</span> humidity <span class="op">=</span> feeds<span class="op">.</span><span class="fu">map</span>(feed <span class="kw">=&gt;</span> <span class="pp">parseFloat</span>(feed<span class="op">.</span><span class="at">field3</span>))<span class="op">;</span></span>
<span id="cb1-43"><a href="#cb1-43"></a>            <span class="cf">return</span> { labels<span class="op">,</span> tempC<span class="op">,</span> tempF<span class="op">,</span> humidity }<span class="op">;</span></span>
<span id="cb1-44"><a href="#cb1-44"></a>        }</span>
<span id="cb1-45"><a href="#cb1-45"></a></span>
<span id="cb1-46"><a href="#cb1-46"></a>        <span class="kw">function</span> <span class="fu">displayLatestValues</span>(labels<span class="op">,</span> tempC<span class="op">,</span> tempF<span class="op">,</span> humidity) {</span>
<span id="cb1-47"><a href="#cb1-47"></a>            <span class="kw">const</span> latestTime <span class="op">=</span> labels[labels<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb1-48"><a href="#cb1-48"></a>            <span class="kw">const</span> latestTempC <span class="op">=</span> tempC[tempC<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb1-49"><a href="#cb1-49"></a>            <span class="kw">const</span> latestTempF <span class="op">=</span> tempF[tempF<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb1-50"><a href="#cb1-50"></a>            <span class="kw">const</span> latestHumidity <span class="op">=</span> humidity[humidity<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb1-51"><a href="#cb1-51"></a></span>
<span id="cb1-52"><a href="#cb1-52"></a>            <span class="kw">const</span> tableHTML <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb1-53"><a href="#cb1-53"></a><span class="vs">                &lt;table&gt;</span></span>
<span id="cb1-54"><a href="#cb1-54"></a><span class="vs">    &lt;tr&gt;</span></span>
<span id="cb1-55"><a href="#cb1-55"></a><span class="vs">        &lt;th&gt;Time&lt;/th&gt;</span></span>
<span id="cb1-56"><a href="#cb1-56"></a><span class="vs">        &lt;th&gt;Temperature C&lt;/th&gt;</span></span>
<span id="cb1-57"><a href="#cb1-57"></a><span class="vs">        &lt;th&gt;Temperature F&lt;/th&gt;</span></span>
<span id="cb1-58"><a href="#cb1-58"></a><span class="vs">        &lt;th&gt;Humidity&lt;/th&gt;</span></span>
<span id="cb1-59"><a href="#cb1-59"></a><span class="vs">    &lt;/tr&gt;</span></span>
<span id="cb1-60"><a href="#cb1-60"></a><span class="vs">    &lt;tr&gt;</span></span>
<span id="cb1-61"><a href="#cb1-61"></a><span class="vs">        &lt;td&gt;</span><span class="sc">${</span>latestTime<span class="op">.</span><span class="fu">toLocaleDateString</span>(<span class="st">'en-US'</span>)<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>latestTime<span class="op">.</span><span class="fu">toLocaleTimeString</span>(<span class="st">'en-US'</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-62"><a href="#cb1-62"></a><span class="vs">        &lt;td&gt;</span><span class="sc">${</span>latestTempC<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-63"><a href="#cb1-63"></a><span class="vs">        &lt;td&gt;</span><span class="sc">${</span>latestTempF<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-64"><a href="#cb1-64"></a><span class="vs">        &lt;td&gt;</span><span class="sc">${</span>latestHumidity<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb1-65"><a href="#cb1-65"></a><span class="vs">    &lt;/tr&gt;</span></span>
<span id="cb1-66"><a href="#cb1-66"></a><span class="vs">&lt;/table&gt;</span></span>
<span id="cb1-67"><a href="#cb1-67"></a><span class="vs">            `</span><span class="op">;</span></span>
<span id="cb1-68"><a href="#cb1-68"></a></span>
<span id="cb1-69"><a href="#cb1-69"></a>            <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'latestValues'</span>)<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> tableHTML<span class="op">;</span></span>
<span id="cb1-70"><a href="#cb1-70"></a>        }</span>
<span id="cb1-71"><a href="#cb1-71"></a></span>
<span id="cb1-72"><a href="#cb1-72"></a>        <span class="kw">async</span> <span class="kw">function</span> <span class="fu">createChart</span>() {</span>
<span id="cb1-73"><a href="#cb1-73"></a>            <span class="kw">const</span> feeds <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetchData</span>()<span class="op">;</span></span>
<span id="cb1-74"><a href="#cb1-74"></a>            <span class="kw">const</span> { labels<span class="op">,</span> tempC<span class="op">,</span> tempF<span class="op">,</span> humidity } <span class="op">=</span> <span class="fu">processData</span>(feeds)<span class="op">;</span></span>
<span id="cb1-75"><a href="#cb1-75"></a></span>
<span id="cb1-76"><a href="#cb1-76"></a>            <span class="kw">const</span> ctx <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myChart'</span>)<span class="op">.</span><span class="fu">getContext</span>(<span class="st">'2d'</span>)<span class="op">;</span></span>
<span id="cb1-77"><a href="#cb1-77"></a>            <span class="kw">const</span> myChart <span class="op">=</span> <span class="kw">new</span> <span class="fu">Chart</span>(ctx<span class="op">,</span> {</span>
<span id="cb1-78"><a href="#cb1-78"></a>                <span class="dt">type</span><span class="op">:</span> <span class="st">'line'</span><span class="op">,</span></span>
<span id="cb1-79"><a href="#cb1-79"></a>                <span class="dt">data</span><span class="op">:</span> {</span>
<span id="cb1-80"><a href="#cb1-80"></a>                    <span class="dt">labels</span><span class="op">:</span> labels<span class="op">,</span></span>
<span id="cb1-81"><a href="#cb1-81"></a>                    <span class="dt">datasets</span><span class="op">:</span> [</span>
<span id="cb1-82"><a href="#cb1-82"></a>                        {</span>
<span id="cb1-83"><a href="#cb1-83"></a>                            <span class="dt">label</span><span class="op">:</span> <span class="st">'Temperature C'</span><span class="op">,</span></span>
<span id="cb1-84"><a href="#cb1-84"></a>                            <span class="dt">data</span><span class="op">:</span> tempC<span class="op">,</span></span>
<span id="cb1-85"><a href="#cb1-85"></a>                            <span class="dt">borderColor</span><span class="op">:</span> <span class="st">'rgba(255, 99, 132, 1)'</span><span class="op">,</span></span>
<span id="cb1-86"><a href="#cb1-86"></a>                            <span class="dt">backgroundColor</span><span class="op">:</span> <span class="st">'rgba(255, 99, 132, 0.2)'</span><span class="op">,</span></span>
<span id="cb1-87"><a href="#cb1-87"></a>                            <span class="dt">borderWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb1-88"><a href="#cb1-88"></a>                            <span class="dt">fill</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb1-89"><a href="#cb1-89"></a>                        }<span class="op">,</span></span>
<span id="cb1-90"><a href="#cb1-90"></a>                        {</span>
<span id="cb1-91"><a href="#cb1-91"></a>                            <span class="dt">label</span><span class="op">:</span> <span class="st">'Temperature F'</span><span class="op">,</span></span>
<span id="cb1-92"><a href="#cb1-92"></a>                            <span class="dt">data</span><span class="op">:</span> tempF<span class="op">,</span></span>
<span id="cb1-93"><a href="#cb1-93"></a>                            <span class="dt">borderColor</span><span class="op">:</span> <span class="st">'rgba(255, 165, 0, 1)'</span><span class="op">,</span></span>
<span id="cb1-94"><a href="#cb1-94"></a>                            <span class="dt">backgroundColor</span><span class="op">:</span> <span class="st">'rgba(255, 165, 0, 0.2)'</span><span class="op">,</span></span>
<span id="cb1-95"><a href="#cb1-95"></a>                            <span class="dt">borderWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb1-96"><a href="#cb1-96"></a>                            <span class="dt">fill</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb1-97"><a href="#cb1-97"></a>                        }<span class="op">,</span></span>
<span id="cb1-98"><a href="#cb1-98"></a>                        {</span>
<span id="cb1-99"><a href="#cb1-99"></a>                            <span class="dt">label</span><span class="op">:</span> <span class="st">'Humidity'</span><span class="op">,</span></span>
<span id="cb1-100"><a href="#cb1-100"></a>                            <span class="dt">data</span><span class="op">:</span> humidity<span class="op">,</span></span>
<span id="cb1-101"><a href="#cb1-101"></a>                            <span class="dt">borderColor</span><span class="op">:</span> <span class="st">'rgba(54, 162, 235, 1)'</span><span class="op">,</span></span>
<span id="cb1-102"><a href="#cb1-102"></a>                            <span class="dt">backgroundColor</span><span class="op">:</span> <span class="st">'rgba(54, 162, 235, 0.2)'</span><span class="op">,</span></span>
<span id="cb1-103"><a href="#cb1-103"></a>                            <span class="dt">borderWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb1-104"><a href="#cb1-104"></a>                            <span class="dt">fill</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb1-105"><a href="#cb1-105"></a>                        }</span>
<span id="cb1-106"><a href="#cb1-106"></a>                    ]</span>
<span id="cb1-107"><a href="#cb1-107"></a>                }<span class="op">,</span></span>
<span id="cb1-108"><a href="#cb1-108"></a>                <span class="dt">options</span><span class="op">:</span> {</span>
<span id="cb1-109"><a href="#cb1-109"></a>                    <span class="dt">scales</span><span class="op">:</span> {</span>
<span id="cb1-110"><a href="#cb1-110"></a>                        <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb1-111"><a href="#cb1-111"></a>                            <span class="dt">type</span><span class="op">:</span> <span class="st">'time'</span><span class="op">,</span></span>
<span id="cb1-112"><a href="#cb1-112"></a>                            <span class="dt">time</span><span class="op">:</span> {</span>
<span id="cb1-113"><a href="#cb1-113"></a>                                <span class="dt">unit</span><span class="op">:</span> <span class="st">'hour'</span></span>
<span id="cb1-114"><a href="#cb1-114"></a>                            }</span>
<span id="cb1-115"><a href="#cb1-115"></a>                        }<span class="op">,</span></span>
<span id="cb1-116"><a href="#cb1-116"></a>                        <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb1-117"><a href="#cb1-117"></a>                            <span class="dt">beginAtZero</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb1-118"><a href="#cb1-118"></a>                        }</span>
<span id="cb1-119"><a href="#cb1-119"></a>                    }</span>
<span id="cb1-120"><a href="#cb1-120"></a>                }</span>
<span id="cb1-121"><a href="#cb1-121"></a>            })<span class="op">;</span></span>
<span id="cb1-122"><a href="#cb1-122"></a></span>
<span id="cb1-123"><a href="#cb1-123"></a>            <span class="fu">displayLatestValues</span>(labels<span class="op">,</span> tempC<span class="op">,</span> tempF<span class="op">,</span> humidity)<span class="op">;</span></span>
<span id="cb1-124"><a href="#cb1-124"></a></span>
<span id="cb1-125"><a href="#cb1-125"></a>            <span class="cf">return</span> myChart<span class="op">;</span></span>
<span id="cb1-126"><a href="#cb1-126"></a>        }</span>
<span id="cb1-127"><a href="#cb1-127"></a></span>
<span id="cb1-128"><a href="#cb1-128"></a>        <span class="kw">let</span> chartInstance<span class="op">;</span></span>
<span id="cb1-129"><a href="#cb1-129"></a></span>
<span id="cb1-130"><a href="#cb1-130"></a>        <span class="kw">async</span> <span class="kw">function</span> <span class="fu">refreshData</span>() {</span>
<span id="cb1-131"><a href="#cb1-131"></a>            <span class="cf">if</span> (chartInstance) {</span>
<span id="cb1-132"><a href="#cb1-132"></a>                chartInstance<span class="op">.</span><span class="fu">destroy</span>()<span class="op">;</span></span>
<span id="cb1-133"><a href="#cb1-133"></a>            }</span>
<span id="cb1-134"><a href="#cb1-134"></a>            chartInstance <span class="op">=</span> <span class="cf">await</span> <span class="fu">createChart</span>()<span class="op">;</span></span>
<span id="cb1-135"><a href="#cb1-135"></a>        }</span>
<span id="cb1-136"><a href="#cb1-136"></a></span>
<span id="cb1-137"><a href="#cb1-137"></a>        <span class="kw">async</span> <span class="kw">function</span> <span class="fu">loadChart</span>() {</span>
<span id="cb1-138"><a href="#cb1-138"></a>            <span class="cf">if</span> (<span class="op">!</span>chartInstance) {</span>
<span id="cb1-139"><a href="#cb1-139"></a>                chartInstance <span class="op">=</span> <span class="cf">await</span> <span class="fu">createChart</span>()<span class="op">;</span></span>
<span id="cb1-140"><a href="#cb1-140"></a>            }</span>
<span id="cb1-141"><a href="#cb1-141"></a>        }</span>
<span id="cb1-142"><a href="#cb1-142"></a></span>
<span id="cb1-143"><a href="#cb1-143"></a>        <span class="bu">window</span><span class="op">.</span><span class="at">onload</span> <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-144"><a href="#cb1-144"></a>            chartInstance <span class="op">=</span> <span class="cf">await</span> <span class="fu">createChart</span>()<span class="op">;</span></span>
<span id="cb1-145"><a href="#cb1-145"></a>        }<span class="op">;</span></span>
<span id="cb1-146"><a href="#cb1-146"></a>    <span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-147"><a href="#cb1-147"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb1-148"><a href="#cb1-148"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>Breaking down the code:</p>
<details>
<summary>
Code Summary
</summary>
<ol type="1">
<li><p><strong>Fetch Data</strong>:</p>
<ul>
<li><strong><code>fetchData()</code></strong>: Fetches the last 6,000 entries from the ThingSpeak API. The <strong><code>await</code></strong> keyword ensures the function waits for the data to be fetched before moving on.</li>
</ul></li>
<li><p><strong>Process Data</strong>:</p>
<ul>
<li><strong><code>processData(feeds)</code></strong>: Processes the raw data to extract timestamps, temperatures in Celsius and Fahrenheit, and humidity. It returns these as arrays.</li>
</ul></li>
<li><p><strong>Display Latest Values</strong>:</p>
<ul>
<li><strong><code>displayLatestValues(labels, tempC, tempF, humidity)</code></strong>: Extracts the latest values from the arrays and formats them into an HTML table. The <strong><code>toLocaleDateString</code></strong> and <strong><code>toLocaleTimeString</code></strong> methods format the date and time in MM/DD/YYYY and 12-hour format respectively.</li>
</ul></li>
<li><p><strong>Create Chart</strong>:</p>
<ul>
<li><strong><code>createChart()</code></strong>: Fetches and processes the data, then uses Chart.js to create a line chart with three datasets: Temperature C, Temperature F, and Humidity. It configures the x-axis to display time and the y-axis to start at zero. It also calls <strong><code>displayLatestValues</code></strong> to update the latest values table.</li>
</ul></li>
<li><p><strong>Refresh Data</strong>:</p>
<ul>
<li><strong><code>refreshData()</code></strong>: Destroys the existing chart instance and creates a new one with the latest data.</li>
</ul></li>
<li><p><strong>Window Onload</strong>:</p>
<ul>
<li><strong><code>window.onload</code></strong>: Ensures the chart is created when the page loads.</li>
</ul></li>
</ol>
<p>By breaking down the code into these sections, we can see how each part works together to fetch data, process it, display it in a chart, and show the latest values in a table. This simple dashboard provides a visual representation of sensor data over the last few hours, making it easier to monitor and analyze the data in real time.</p>
</details>
<p>Overall, this is a lot more lightweight than Grafana and given the fact that I’m not generating large amounts of traffic to Thingspeak this works very well as a simple logger/check-in for myself. I’m sure there’s a lot more convoluted ways of checking on the sensors, but this web interface allows me to quickly assess if I have downtime or the sensors are toast.</p>
<p>Additionally, I downloaded RaspController on iOS to quickly check on my sensors when at home. Overall, the ads were a bit intrusive and even reading from the simple DHT11 sensor was a bit goofy with the sensor readout being read then a few seconds later the readings disconnecting. I believe there’s a PRO version, but I doubt the functionality boost warrants the price as the web display is robust enough.</p>
<p>Regardless I plan on implementing an ESP32 based solution moving forward. Some comparisons are noted below based on what I’ve read online, but of course that can change once experience/pain sets in. I’m assuming that the 2s delay I’m experiencing will get worse as I add more sensors so I’m assuming the worst. I also plan on implementing the sensors outlined in my <a href="https://jesse-anderson.github.io/Blog/_site/posts/Pi-Sensor-Proj-May-2024/">first raspberry pi post</a>.</p>
<section id="overview-of-sensors" class="level4">
<h4 class="anchored" data-anchor-id="overview-of-sensors"><strong>Overview of Sensors</strong></h4>
<ol type="1">
<li><p><strong>PMS5003</strong>: Measures particulate matter (PM2.5 and PM10) with a typical update interval of 1 second.</p></li>
<li><p><strong>MH-Z19</strong>: Measures CO2 levels with an update interval of every 2-3 seconds.</p></li>
<li><p><strong>DHT22</strong>: Measures temperature and humidity with a sampling rate of 2 seconds.</p></li>
<li><p><strong>BME680</strong>: Measures temperature, humidity, pressure, and VOC, with data output intervals ranging from 1 to 3 seconds.</p></li>
<li><p><strong>MQ135</strong>: Measures air quality (VOC levels), requires analog-to-digital conversion and calibration for accurate readings.</p></li>
</ol>
</section>
<section id="sampling-speed-and-sensor-handling" class="level4">
<h4 class="anchored" data-anchor-id="sampling-speed-and-sensor-handling"><strong>1. Sampling Speed and Sensor Handling</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Capabilities</strong>: Equipped with a multi-core CPU and up to 8GB RAM, allowing concurrent handling of multiple sensors.</p></li>
<li><p><strong>PMS5003</strong>: Capable of continuous 1-second updates.</p></li>
<li><p><strong>MH-Z19</strong>: Efficiently handles 2-3 second intervals.</p></li>
<li><p><strong>DHT22</strong>: Manages 2-second intervals smoothly.</p></li>
<li><p><strong>BME680</strong>: Processes complex outputs (temperature, humidity, pressure, VOC) every 1-3 seconds.</p></li>
<li><p><strong>MQ135</strong>: Utilizes an ADC for continuous data reading.</p></li>
<li><p><strong>Overall Sampling</strong>: Can read from all sensors simultaneously, processing and displaying data in real-time.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Capabilities</strong>: Dual-core processor designed for real-time processing, but might need optimization for simultaneous high-frequency data handling(C++).</p></li>
<li><p><strong>PMS5003</strong>: Handles 1 Hz output effectively.</p></li>
<li><p><strong>MH-Z19</strong>: Manages 2-3 second intervals efficiently.</p></li>
<li><p><strong>DHT22</strong>: Handles 2-second intervals without issues.</p></li>
<li><p><strong>BME680</strong>: Efficiently processes complex outputs within the 1-3 second range.</p></li>
<li><p><strong>MQ135</strong>: Uses built-in ADC for continuous data but might have fewer channels than an external ADC.</p></li>
<li><p><strong>Overall Sampling</strong>: Can handle the cumulative sampling rate with careful resource management.</p></li>
</ul></li>
</ul>
</section>
<section id="overhead-from-operating-system" class="level4">
<h4 class="anchored" data-anchor-id="overhead-from-operating-system"><strong>2. Overhead from Operating System</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>OS</strong>: Runs a full Linux-based OS (e.g., Raspbian) with a graphical user interface, background processes, and system services.</p></li>
<li><p><strong>Overhead</strong>: Significant but manageable, thanks to the Pi’s processing power.</p></li>
<li><p><strong>Advantages</strong>: Multi-threading, extensive libraries, ability to run heavy applications (e.g., databases, servers).</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>OS</strong>: Operates with a minimal OS like FreeRTOS or can run bare-metal.</p></li>
<li><p><strong>Overhead</strong>: Minimal, making it highly efficient for real-time applications.</p></li>
<li><p><strong>Advantages</strong>: Direct hardware control, low latency, efficient resource use.</p></li>
</ul></li>
</ul>
</section>
<section id="speed-of-data-transfer-wirelessly" class="level4">
<h4 class="anchored" data-anchor-id="speed-of-data-transfer-wirelessly"><strong>3. Speed of Data Transfer Wirelessly</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Wi-Fi</strong>: Supports 2.4 GHz and 5 GHz bands, with data transfer rates up to several hundred Mbps.</p></li>
<li><p><strong>Use Cases</strong>: Suitable for fast, reliable data transfer, streaming large datasets, frequent updates to a remote server.</p></li>
<li><p><strong>Bluetooth</strong>: Available for short-range communication.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Wi-Fi</strong>: Primarily operates on the 2.4 GHz band, with data rates up to 150 Mbps.</p></li>
<li><p><strong>Use Cases</strong>: Adequate for sensor data transmission, suitable for IoT applications.</p></li>
<li><p><strong>Bluetooth</strong>: Supports Bluetooth (classic and BLE), useful for short-range data transfer and low-power communication.</p></li>
</ul></li>
</ul>
</section>
<section id="programming-language-choice" class="level4">
<h4 class="anchored" data-anchor-id="programming-language-choice"><strong>4. Programming Language Choice</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Languages</strong>: Supports Python, C, C++, JavaScript, Java, and more.</p></li>
<li><p><strong>Development</strong>: Python is favored for its simplicity and extensive library support for hardware interaction.</p></li>
<li><p><strong>Flexibility</strong>: Extensive libraries and frameworks for data processing, machine learning, web servers.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Languages</strong>: Commonly programmed using Arduino IDE (C/C++) or MicroPython.</p></li>
<li><p><strong>Development</strong>: Arduino IDE provides robust sensor libraries; MicroPython offers ease of use and rapid prototyping.</p></li>
<li><p><strong>Flexibility</strong>: C/C++ for performance and control; MicroPython for quick development and debugging.</p></li>
</ul></li>
</ul>
</section>
<section id="cost" class="level4">
<h4 class="anchored" data-anchor-id="cost"><strong>5. Cost</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Board Cost</strong>: $10 (Pi Zero) to $35-$75 (Pi 3 or Pi 4 models).</p></li>
<li><p><strong>Additional Costs</strong>: Power supplies, SD cards, cases, peripherals, potentially exceeding $100.</p></li>
<li><p><strong>Value Proposition</strong>: Higher cost but extensive capabilities, suitable for complex applications.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Board Cost</strong>: Typically $5-$10.</p></li>
<li><p><strong>Additional Costs</strong>: Fewer peripherals needed, reducing overall system cost.</p></li>
<li><p><strong>Value Proposition</strong>: Highly cost-effective for simple, cost-sensitive projects.</p></li>
</ul></li>
</ul>
</section>
<section id="power-consumption" class="level4">
<h4 class="anchored" data-anchor-id="power-consumption"><strong>6. Power Consumption</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Consumption</strong>: Higher due to its full-featured OS and higher processing power.</p></li>
<li><p><strong>Power Supply</strong>: Requires a stable 5V power supply, typically 2.5A or more.</p></li>
<li><p><strong>Suitability</strong>: Best for applications with reliable power sources.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Consumption</strong>: Low-power design with deep sleep modes and efficient power management.</p></li>
<li><p><strong>Power Supply</strong>: Can operate on battery power for extended periods.</p></li>
<li><p><strong>Suitability</strong>: Ideal for battery-powered or solar-powered IoT applications.</p></li>
</ul></li>
</ul>
</section>
<section id="complexity-of-setup" class="level4">
<h4 class="anchored" data-anchor-id="complexity-of-setup"><strong>7. Complexity of Setup</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Setup</strong>: Involves OS installation, Wi-Fi configuration, and additional software setup.</p></li>
<li><p><strong>Ease of Use</strong>: Broad ecosystem and community support for troubleshooting.</p></li>
<li><p><strong>Learning Curve</strong>: Higher due to OS complexity.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Setup</strong>: Simpler, involving firmware flashing and code development.</p></li>
<li><p><strong>Ease of Use</strong>: Growing community support, good documentation.</p></li>
<li><p><strong>Learning Curve</strong>: Lower, especially with Arduino IDE or MicroPython.</p></li>
</ul></li>
</ul>
</section>
<section id="integration-with-databases" class="level4">
<h4 class="anchored" data-anchor-id="integration-with-databases"><strong>8. Integration with Databases</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Local Databases</strong>: Can run MySQL, PostgreSQL, SQLite for local storage and complex queries.</p></li>
<li><p><strong>Remote Databases</strong>: Interfaces with cloud databases via APIs.</p></li>
<li><p><strong>Use Cases</strong>: Suitable for extensive data storage, processing, and local analytics.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Remote Databases</strong>: Interfaces with databases through HTTP/HTTPS, MQTT, or APIs.</p></li>
<li><p><strong>Local Storage</strong>: Limited, suitable for buffering data before transmission.</p></li>
<li><p><strong>Use Cases</strong>: Best for periodic data transmission to a central server.</p></li>
</ul></li>
</ul>
</section>
<section id="scalability-and-expandability" class="level4">
<h4 class="anchored" data-anchor-id="scalability-and-expandability"><strong>9. Scalability and Expandability</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Scalability</strong>: High, with multiple USB ports, GPIO pins, and support for I2C, SPI, UART.</p></li>
<li><p><strong>Expandability</strong>: Can connect multiple sensors, peripherals, and expansion boards (HATs).</p></li>
<li><p><strong>Use Cases</strong>: Ideal for larger, complex projects needing scalability.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Scalability</strong>: Moderate, fewer GPIO pins but sufficient for many IoT projects.</p></li>
<li><p><strong>Expandability</strong>: Supports I2C, SPI, UART; multiple sensors can be connected.</p></li>
<li><p><strong>Use Cases</strong>: Suitable for compact, efficient IoT solutions.</p></li>
</ul></li>
</ul>
</section>
<section id="community-and-support" class="level4">
<h4 class="anchored" data-anchor-id="community-and-support"><strong>10. Community and Support</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Community</strong>: Extensive, with many tutorials, forums, and resources.</p></li>
<li><p><strong>Support</strong>: Strong, especially for educational, hobbyist, and professional uses.</p></li>
<li><p><strong>Documentation</strong>: Comprehensive, with official support from the Raspberry Pi Foundation.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Community</strong>: Growing, with many tutorials and forums.</p></li>
<li><p><strong>Support</strong>: Adequate, focused on embedded systems and IoT.</p></li>
<li><p><strong>Documentation</strong>: Good, provided by Espressif and third-party contributors.</p></li>
</ul></li>
</ul>
</section>
<section id="real-time-operating-capabilities" class="level4">
<h4 class="anchored" data-anchor-id="real-time-operating-capabilities"><strong>11. Real-Time Operating Capabilities</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>RTOS</strong>: Not typically used, though real-time kernels (PREEMPT-RT) are available for specific applications.</p></li>
<li><p><strong>Suitability</strong>: Best for applications where real-time performance is not critical.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>RTOS</strong>: FreeRTOS support, ideal for real-time applications.</p></li>
<li><p><strong>Suitability</strong>: Designed for real-time processing, making it suitable for time-sensitive tasks.</p></li>
</ul></li>
</ul>
</section>
<section id="security" class="level4">
<h4 class="anchored" data-anchor-id="security"><strong>12. Security</strong></h4>
<ul>
<li><p><strong>Raspberry Pi</strong>:</p>
<ul>
<li><p><strong>Security Features</strong>: Depends on OS and software; can use advanced security protocols and encryption.</p></li>
<li><p><strong>Use Cases</strong>: Suitable for applications requiring robust security measures.</p></li>
</ul></li>
<li><p><strong>ESP32</strong>:</p>
<ul>
<li><p><strong>Security Features</strong>: Built-in hardware security features (e.g., secure boot, flash encryption).</p></li>
<li><p><strong>Use Cases</strong>: Adequate for secure IoT applications.</p></li>
</ul></li>
</ul>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary"><strong>Summary</strong></h3>
<ul>
<li><p><strong>Sampling Speed</strong>: Both the Raspberry Pi and ESP32 can handle the sensors’ sampling rates, with the Pi having more processing power for higher-frequency data collection.</p></li>
<li><p><strong>Overhead from OS</strong>: The Raspberry Pi has more overhead due to its full OS, while the ESP32 operates with minimal overhead, ideal for real-time applications.</p></li>
<li><p><strong>Wireless Data Transfer</strong>: The Raspberry Pi achieves higher data transfer speeds, but the ESP32’s capabilities are sufficient for sensor data transmission.</p></li>
<li><p><strong>Programming Language</strong>: The Raspberry Pi offers more flexibility, while the ESP32 focuses on C/C++ and MicroPython.</p></li>
<li><p><strong>Cost</strong>: The ESP32 is significantly cheaper, making it attractive for cost-sensitive projects.</p></li>
<li><p><strong>Power Consumption</strong>: The ESP32 is more power-efficient, suitable for battery-powered applications.</p></li>
<li><p><strong>Complexity of Setup</strong>: The Raspberry Pi setup is more complex but has broader support, while the ESP32 setup is simpler and more focused.</p></li>
<li><p><strong>Integration with Databases</strong>: The Raspberry Pi can run full database servers locally, while the ESP32 typically relies on remote databases.</p></li>
<li><p><strong>Scalability and Expandability</strong>: The Raspberry Pi is more scalable and expandable, suitable for larger projects.</p></li>
<li><p><strong>Community and Support</strong>: The Raspberry Pi has a larger community and more extensive support.</p></li>
<li><p><strong>Real-Time Operating Capabilities</strong>: The ESP32 is better suited for real-time applications with its RTOS support.</p></li>
<li><p><strong>Security</strong>: Both offer security features, but the ESP32 has built-in hardware security for IoT applications.</p></li>
</ul>
<p>In conclusion, the Raspberry Pi offers more computational power and flexibility, making it suitable for complex applications requiring robust data processing and local storage. The ESP32, with its low cost, low power consumption, and efficient real-time processing capabilities, is ideal for simpler, cost-effective, and portable sensor applications. Additionally, the cost of failure for a raspberry pi is quite large while an ESP32 is negligible. I would like to have a real time setup along with a dynamic plot of temp, humidity, etc. for a plant monitoring project. To do this at scale(someone has 50+ plants….) I need to dramatically reduce cost. Additionally, I need to also begin budgeting for a Pi cluster project to learn distributed/parallel computing, which, funny enough, are two classes in my Master’s at UIUC that I would like to take(CS425 and CS484 respectively). Truth be told much of this IoT Raspberry Pi/Arduino type work recently stems from a desire to take the IoT class at UIUC, but that class’ priority relative to other courses such as Machine Learning, Statistical Learning, etc. is dead last and puts me over the credits I need. Additionally, implementing X/Y/Z with this hardware allows me to learn how things work at a fraction of tuition(1/10).</p>
<p>Ideally the cluster would serve as a way of actually learning parallel computing and also establishing some local web services to make my life easier. The tentative list of local web service projects include:</p>
<ol type="1">
<li><p><u><strong>Plant Monitoring Dashboard</strong></u></p>
<ul>
<li><p><strong>Project:</strong> A centralized dashboard to monitor temp, humidity, soil moisture, and other environmental factors for plants of concern.</p></li>
<li><p><strong>Tech:</strong> I plan on using Flask/Django for the backend, React for the frontend, and a database like PostgreSQL for the DB.</p></li>
<li><p><strong>Benefits:</strong> I also plan on implementing some sort of algorithm to determine when there’s a problem and sending push notifications or texts to the user.</p></li>
</ul></li>
<li><p><u><strong>Personal Cloud Storage</strong></u></p>
<ul>
<li>Self hosted cloud storage solution using something like NextCloud to store and share files securely. I might keep this guy local though as the only thing I plan on exposing to the World Wide Web would be a website which uses Cloudflare for security.</li>
</ul></li>
<li><p><u><strong>Local Development Server(Local Git)</strong></u></p>
<ul>
<li><p><strong>Project:</strong> Development environment for testing and deploying web applications and other software projects.</p></li>
<li><p><strong>Tech:</strong> I’d likely use Docker for containerized environments, Jenkins for CI/CD pipelines, and Git for version control. I would also deeply expand my knowledge of what’s what with this tech.</p></li>
<li><p><strong>Benefits:</strong> This should actually help standardize and streamline my development workflow, let me perform automated testing/deployment, and provide a stable/cheap platform for experimentation with new tech.</p></li>
</ul></li>
<li><p><u><strong>Media Server(Mostly PS4/Samsung TV)</strong></u></p>
<ul>
<li><p><strong>Project:</strong> Local media server to host/stream media content like movies/music/photos</p></li>
<li><p><strong>Tech:</strong> Plex or Jellyfin for media management and streaming.</p></li>
<li><p><strong>Benefits:</strong> Centralized media library with near seamless access to my favorite(repeatedly watched) shows.</p></li>
</ul></li>
<li><p><u><strong>IoT Device Management</strong></u></p>
<ol type="1">
<li><p><strong>Project:</strong> Platform to manage/monitor/update IoT devices deployed throughout the house. Likely temp/humidity/air quality sensors and plant sensors. Possible intrusion detection sensors if I decide to revisit some of my previous projects.</p></li>
<li><p><strong>Technology:</strong> Mosquitto for MQTT communication, InfluxDB for time-series data, and Grafana(if I’m not using JSON’s…) for visualization.</p></li>
<li><p><strong>Benefits:</strong> Centralized control and visualization of all IoT devices, real time monitoring, and simplified firmware updates. I will have to write quite a bit of C++ code now that I think about it to ensure the ESP32 works and works fast.</p></li>
</ol></li>
<li><p><u><strong>Network Monitoring Tool</strong></u></p>
<ol type="1">
<li><p><strong>Project:</strong> Basic system to monitor the health/performance of my network.</p></li>
<li><p><strong>Tech:</strong> Nagios or Zabbix.</p></li>
<li><p><strong>Benefits:</strong> Real time alerts on network issues, detailed performance metrics, and insights into network traffic patterns.</p></li>
</ol></li>
<li><p><u><strong>PiHole</strong></u></p>
<ol type="1">
<li><p><strong>Project:</strong> Pi hold server to provide network wide ad blocking, improve browsing speed, and improve privacy by blocking unwanted ads/trackers. It can also act as a local DNS resolver boosting network performance.</p></li>
<li><p><strong>Tech:</strong> Raspberry Pi for running the software.</p></li>
<li><p><strong>Benefits:</strong> Ad blocking, boost privacy, reduce data usage, reduce DNS query times and overall help speed up my network.</p></li>
</ol></li>
<li><p><u><strong>HPC Pi</strong></u></p>
<ol type="1">
<li><p><strong>Project:</strong> Build a scalable Raspberry Pi cluster(at least 3) to learn and implement parallel computing, distributed computing, and high performance computing concepts.</p></li>
<li><p><strong>Tech:</strong> Multiple raspberry pis, networking equipment, cluster management software, and parallel computing libraries(OpenMP/MPI). Plus Kubernetes.</p></li>
<li><p><strong>Benefits:</strong> Hands on experience with distributed systems and parallel processing, cost effective way of exploring high performance computing, and gaining marketable skills in cluster setup, management, and scalability.</p></li>
</ol></li>
</ol>
<p>Tentatively something like <a href="https://www.raspberrypi.com/tutorials/cluster-raspberry-pi-tutorial/">this tutorial</a>will be followed and result in a three pi setup vs the 8 pi setup below(from the tutorial):</p>
<p><a href="Bramble-Network-Diagram.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="Bramble-Network-Diagram.png" class="img-fluid"></a></p>
<p>Hopefully I have some time before the summer ends and classes begin to experiment. Fingers crossed and my willpower willing, I will take the distributed systems course this fall alongside an intensive statistical learning course!</p>


</section>

</main> <!-- /main -->






    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Support Page</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>

        .centered-text {

            text-align: center; /* Centers text for elements with this class */

        }

        .centered-content {

            display: flex; /* Uses Flexbox for layout */

            justify-content: center; /* Horizontally centers the content within the container */

            align-items: center; /* Vertically centers the content within the container */

        }

        .email-share-button {

            background: #007BFF; /* Example: a distinct blue color for the email button */

            color: white; /* Ensure text and icon are white for visibility */

        }

        #share-buttons {

            display: flex;

            align-items: center;

            justify-content: center;

            gap: 5px;

        }

        .share-button {

            display: inline-flex;

            padding: 2px 4px;

            font-size: 14px;

            cursor: pointer;

            text-align: center;

            color: white;

            border-radius: 0px;

        }

    </style>





    <footer class="centered-text">

        <p>Copyright © <span id="copyright-year"></span> Jesse Anderson</p>

        <!-- Other footer details -->

    </footer>

    <div>

        <hr>

        <h3 class="centered-text">Support my work with a Coffee/Monster</h3>

        <div class="centered-content">

            <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="jesseanderson" data-color="#06436e" data-emoji="☕" data-font="Lato" data-text="Support me" data-outline-color="#ffffff" data-font-color="#ffffff" data-coffee-color="#FFDD00" data-height="40px"></script>

        </div>

        <!-- Footer content -->

        <h3 class="centered-text">Share</h3>

        <!-- Share Buttons -->

        <div id="share-buttons" class="centered-content">

            <!-- Twitter Share Button, dynamically setting the URL -->

            <a href="#" class="share-button twitter-share-button" data-size="large" data-hashtags="computerscience" data-via="JesseA7C5" data-show-count="false">Tweet</a>

            <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

            <!-- Facebook SDK with Dynamic Nonce -->

            <div id="fb-root"></div>

            <script id="facebook-jssdk" async="" defer="" crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&amp;version=v10.0"></script>

            <div class="fb-share-button share-button" data-href="" data-layout="button_count">

            </div>

            <!-- LinkedIn Share Button -->

            <script src="https://platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>

            <script type="IN/Share" data-url=""></script>

            <!-- Email Share Button -->

            <a href="#" class="share-button email-share-button"><i class="fas fa-envelope"></i></a>

        </div>

    </div>

    <script>

        // Function to generate a random nonce

        function generateNonce(length = 16) {

            const possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

            let text = "";

            for (let i = 0; i < length; i++) {

                text += possible.charAt(Math.floor(Math.random() * possible.length));

            }

            return text;

        }

        // Set the nonce attribute for the Facebook SDK script and dynamically set URLs

        document.addEventListener('DOMContentLoaded', function() {

            const nonce = generateNonce();

            const facebookSDKScript = document.getElementById('facebook-jssdk');

            facebookSDKScript.setAttribute('nonce', nonce);

            var elems = document.querySelectorAll('script[type="IN/Share"]');

            for (var i = 0; i < elems.length; i++) {

                elems[i].setAttribute('data-url', window.location.href);

            }

            // Set dynamic URLs for social sharing

            const currentUrl = window.location.href;

            const currentTitle = document.title; // Use the current document title as the email subject

            // Facebook

            document.querySelector('.fb-share-button').setAttribute('data-href', currentUrl);

            // LinkedIn

            document.querySelectorAll('script[type="IN/Share"]')[0].setAttribute('data-url', currentUrl);

            // Twitter

            document.querySelector('.twitter-share-button').setAttribute('href', 'https://twitter.com/share?url=' + encodeURIComponent(currentUrl) + '&hashtags=rstats');

            // Email

            document.querySelector('.email-share-button').setAttribute('href', `mailto:?subject=${encodeURIComponent(currentTitle)}&body=Check out this link: ${encodeURIComponent(currentUrl)}`);

            // Dynamically set the current year in the copyright footer

            document.getElementById('copyright-year').textContent = new Date().getFullYear();

        });

        // This script below to put a latest posts list after the comment system was such a pain in the ass.

        document.addEventListener('DOMContentLoaded', function() {

            // console.log("Latest Posts Populating...");

            // Create the latest posts container

            const latestPostsContainer = document.createElement('div');

            latestPostsContainer.className = 'latest-posts';

            latestPostsContainer.innerHTML = `

                <h3>Latest Posts</h3>

                <ul id="latest-posts-list">

                    <!-- Latest posts will be inserted here -->

                </ul>

            `;

            // Find the footer element

            const footer = document.querySelector('footer.footer');

            // Insert the latest posts container before footer, easier than after utterances.

            footer.parentNode.insertBefore(latestPostsContainer, footer);

            // Fetch latest posts from the archive page

            fetch('https://jesse-anderson.github.io/Blog/_site/archive.html')

                .then(response => response.text())

                .then(data => {

                    const parser = new DOMParser();

                    const doc = parser.parseFromString(data, 'text/html');

                    const posts = doc.querySelectorAll('.quarto-listing-container-table tbody tr');

                    // console.log("Posts: ", posts);

                    const latestPostsList = document.getElementById('latest-posts-list');

                    let count = 0;

                    posts.forEach(post => {

                        if (count < 4) {

                            // console.log("Title populating...");

                            const titleElement = post.querySelector('.listing-title'); // Correctly select the <a> tag with the title class

                            // console.log(titleElement)

                              const imageElement = post.querySelector('.listing-image img');

                              // console.log(imageElement)

                            if (titleElement) {

                                const title = titleElement.textContent.trim();

                                // console.log('Title: ', title);

                                let url = titleElement.getAttribute('href');

                                // console.log('URL: ', url);

                                if (url && !url.startsWith('http')) {

                                    url = 'https://jesse-anderson.github.io/Blog/_site/' + url.replace(/^\.\//, '');

                                }

                                // console.log('Formatted URL: ', url);

                                const imageUrl = imageElement ? imageElement.getAttribute('src').replace(/^\.\//, 'https://jesse-anderson.github.io/Blog/_site/') : 'default-image.jpg'; // Fallback image

                                // console.log('Image URL: ', imageUrl);

                                const listItem = document.createElement('li');

                                listItem.innerHTML = `<a href="${url}"><img src="${imageUrl}" alt="Post Image" style="height: 20px;"> ${title}</a>`;

                                latestPostsList.appendChild(listItem);

                                // console.log('ListItem: ', listItem);

                                count++;

                            } else {

                                console.warn('Missing elements for post:', post);

                            }

                        }

                    });

                });

        });

    </script>





<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="jesse-anderson/blogComments" issue-term="title" theme="github-dark" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"loop":false,"openEffect":"zoom","descPosition":"bottom","closeEffect":"zoom","selector":".lightbox"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>